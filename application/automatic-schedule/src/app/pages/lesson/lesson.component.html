<div class="p-3">
    <!-- toolbar -->
    <div class=" mx-4 mt-4 pb-3 border-b">
        <div class="mb-5 flex justify-between">
            <h1 class="text-3xl font-semibold border-l-[6px] border-blue-500 pl-3">{{title}}</h1>
            <div>
                <button class="hover:bg-slate-200 rounded-full h-8 w-8"> <i class="fa fa-cog"></i> </button>
            </div>
        </div>

        <div class="flex items-center space-x-3">
            <!-- search -->
            <div class="border w-1/3 flex items-center p-1 rounded-md bg-gray-50 flex-1">
                <input #myTitle (keyup)="onSearch(myTitle.value)" type="text" class="bg-gray-50 w-full outline-none px-2" placeholder="Search">
                <span class="px-2"><i class="fa fa-search"></i></span>
            </div>

            <!-- button import -->
            <button class="bg-orange-500 hover:bg-orange-400 px-4 py-2 rounded-md font-semibold text-white">
                <i class="fa fa-file-excel"></i>
            </button>
            <!-- button export -->
            <button class="bg-green-500 hover:bg-green-400 px-4 py-2 rounded-md font-semibold text-white">
                <i class="fa fa-file-excel"></i>
            </button>
            <!-- button popup form -->
            <button (click)="popup.onOpenPopup()"
                class="bg-sky-500 hover:bg-sky-400 px-4 py-2 rounded-md font-semibold text-white">
                <i class="fa fa-plus"></i> ADD
            </button>
        </div>
    </div>

    <!-- content -->
    <div class="mx-4 mt-4">
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th *ngFor="let key of columnsKey" scope="col" class="px-6 py-3">
                            {{key}}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of data, index as i"
                        class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
                        <td class="px-6 py-4">
                            {{i+1}}
                        </td>
                        <td class="px-6 py-4">
                            {{item.subjectID}}
                        </td>
                        <td class="px-6 py-4">
                            {{item.subjectName}}
                        </td>
                        <td class="px-6 py-4">
                            {{item.credit}}
                        </td>
                        <td class="px-6 py-4">
                            {{item.description}}
                        </td>
                        <td class="px-6 py-4">
                            {{item.duration}}
                        </td>
                        <td class="px-6 py-4 space-x-3">
                            <button (click)="getDetail(item.subjectID)" class="p-2 font-medium text-blue-600 dark:text-blue-500 hover:underline"><i
                                class="fa fa-pen"></i></button>
                        <button (click)="deleteRoom(item.subjectID)" class="p-2 font-medium text-red-600 dark:text-red-500 hover:underline">
                            <i class="fa fa-trash"></i>
                        </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- view model popup -->
<app-popup #popup [popupTitle]="title" (callbackWhenClose)="clearForm($event)" >
    <div sectionPopup>
        <form class="w-full" [formGroup]="subjectForm" (ngSubmit)="onSubmit()">
            <!-- subject -->
            <div>
                <label for="subjectName" class="block mb-2 text-sm font-medium text-gray-900 ">
                    Subject Name</label>
                <input type="text" id="lessonName" formControlName="subjectName"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"
                    placeholder="Name here" />
                <div class="h-[26px]">
                    <div *ngIf="subjectName && subjectName.errors && (subjectName.touched || subjectName.dirty)"
                        class="ml-1 text-[13px] font-semibold">
                        <span *ngIf="subjectName.errors?.['required']" class="text-rose-500">*subject is required</span>
                        <span *ngIf="subjectName.errors?.['pattern']" class="text-rose-500"> *No special Character</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <!-- duration -->
                <div class="flex-1">
                    <label for="duration" class="block mb-2 text-sm font-medium text-gray-900 ">
                        Duration</label>
                    <input type="text" id="duration" formControlName="duration"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"
                        value="0" />
                    <div class="h-[26px]">
                        <div *ngIf="duration && duration.errors && (duration.touched || duration.dirty)"
                            class="ml-1 text-[13px] font-semibold">
                            <span *ngIf="duration.errors?.['required']" class="text-rose-500">*duration is
                                required</span>
                            <span *ngIf="duration.errors?.['pattern']" class="text-rose-500"> *Only Number</span>
                        </div>
                    </div>
                </div>

                <!-- credit -->
                <div class="flex-1">
                    <label for="credit" class="block mb-2 text-sm font-medium text-gray-900 ">
                        Credit</label>
                    <input type="text" id="credit" formControlName="credit"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"
                        value="0" />
                    <div class="h-[26px]">
                        <div *ngIf="credit && credit.errors && (credit.touched || credit.dirty)"
                            class="ml-1 text-[13px] font-semibold">
                            <span *ngIf="credit.errors?.['required']" class="text-rose-500">*credit is
                                required</span>
                            <span *ngIf="credit.errors?.['pattern']" class="text-rose-500"> *Only Number</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- description -->
            <div>
                <label for="description" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your
                    Description</label>
                <textarea id="description" rows="4" formControlName="description"
                    class="block p-2.5 resize-none w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300"
                    placeholder="Write description here..."></textarea>
                <div class="h-[26px]">
                    <div *ngIf="description && description.errors && (description.touched || description.dirty)"
                        class="ml-1 text-[13px] font-semibold">
                        <span *ngIf="description.errors?.['required']" class="text-rose-500">*description is
                            required</span>
                        <span *ngIf="description.errors?.['maxlength']" class="text-rose-500">*Max 254 Character </span>
                    </div>
                </div>
            </div>

            <!-- button -->
            <div class="flex justify-center">
                <button type="submit" *ngIf="!this.currentID"
                    class="text-white bg-sky-600 hover:bg-sky-700 font-medium rounded-lg text-sm w-1/4 px-5 py-2.5 text-center">
                    Submit
                </button>
                <button type="submit" *ngIf="this.currentID"
                    class="text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm w-1/4 px-5 py-2.5 text-center">
                    Update
                </button>
            </div>
        </form>
    </div>
</app-popup>