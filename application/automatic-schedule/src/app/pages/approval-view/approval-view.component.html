<div class="p-3">
    <!-- request list -->
    <div class="mx-4 mt-4 pb-3 border-b">
        <!-- toolbar -->
        <div class="mb-5 flex justify-between">
            <h1 class="text-3xl font-semibold border-l-[6px] border-blue-500 pl-3">{{title}}</h1>
            <!-- update -->
            <label class="inline-flex items-center cursor-pointer">
                <input type="checkbox" value="" class="sr-only peer">
                <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 
                    peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer 
                    dark:bg-gray-700 peer-checked:after:translate-x-full 
                    rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white 
                    after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white 
                    after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 
                    after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
                </div>
                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Allow Request</span>
            </label>
            <!--  -->
            <button class="hidden bg-green-500 hover:bg-green-400 px-3 py-1.5 rounded-md font-semibold text-white">
                <i class="fa fa-paper-plane"></i> Save
            </button>
        </div>

        <!-- list request -->
        <div class="items-center flex gap-5">
            <button class="py-5 text-lg font-semibold 0"  (click)="onUnChangeViewRequested()">
                <span [ngClass]="{'bg-sky-500':!test, 'bg-gray-500':test}" class="border p-1 px-2 rounded-md text-white">
                    Schedule's Request
                </span>
            </button>
            <button class="py-5 text-lg font-semibold"  (click)="onChangeViewRequested()">
                <span [ngClass]="{'bg-sky-500':test, 'bg-gray-500':!test}" 
                class="border p-1 px-2 rounded-md text-white">
                    Request History
                </span>
            </button>
        </div>
        <div class="mt-2">
            <div class="relative max-h-[50vh] overflow-y-auto overflow-x-auto  sm:rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 overflow-y-auto">
                    <thead
                        class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0">
                        <tr>
                            <th scope="col" class="px-6 py-3">
                                No
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Teacher
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Time request 1st
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Time request 2st
                            </th>
                            <th scope="col" class="px-6 py-3">
                                description
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Reason
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bg-white dark:bg-gray-800" *ngFor="let item of dataRequest; index as i">
                            <th scope="row"
                                class="px-4 py-2 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                {{i + 1}}
                            </th>
                            <td class="px-4 py-2">
                                {{item.lecturerName}}
                            </td>
                            <td class="px-4 py-2">
                                <div class="flex gap-5 items-center">
                                    <span [ngClass]="{'line-through':item.timeSelect != 1 && test}" >{{formatDateTime(item.time)}}</span>
                                    <button
                                        (click)="acceptRequest(item.requestID,'1')"
                                        [ngClass]="{'hidden':test}"
                                        class="h-[35px] w-[35px] font-medium text-green-600 rounded-full hover:bg-gray-100 flex items-center justify-center">
                                        <i class="fa fa-check-circle text-xl"></i>
                                    </button>
                                </div>
                            </td>
                            <td class="px-4 py-2">
                                <div class="flex gap-5 items-center">
                                    <span [ngClass]="{'line-through':item.timeSelect != 2 && test}" >{{formatDateTime(item.time2)}}</span>
                                    <button
                                        (click)="acceptRequest(item.requestID,'2')"
                                        [ngClass]="{'hidden':test}"
                                        class="h-[35px] w-[35px] font-medium text-green-600 rounded-full hover:bg-gray-100 flex items-center justify-center">
                                        <i class="fa fa-check-circle text-xl"></i>
                                    </button>
                                </div>
                            </td>
                            <td class="px-4 py-2">
                                {{item.content}}
                            </td>
                            <td class="px-4 py-2">
                                {{item.reason}}
                            </td>
                            <td class="px-4 py-2">
                                <button 
                                    (click)="rejectRequest(item.requestID)"
                                    [ngClass]="{'hidden':test}"
                                    class="h-[35px] w-[35px] font-medium text-red-600 rounded-full hover:bg-gray-100 flex items-center justify-center">
                                    <i class="fa fa-ban text-xl"></i>
                                </button>
                                <span [ngClass]="{'hidden':item.status != 'success'}" class="text-green-500 font-semibold" >
                                    {{item.status}}
                                </span>
                                <span [ngClass]="{'hidden':item.status != 'reject'}" class="text-red-500 font-semibold">
                                    {{item.status}}
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <!-- schedule before update -->
    <div class="px-4 pt-2">
        <div
            class="p-5 flex gap-2 items-center text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800">
            <span class="text-base font-normal border p-1 rounded-md bg-pink-600 text-white">Before Update</span>
            <span>{{title}}</span>
        </div>
        <!-- view table content -->
        <app-schedule-table [dataCourse]="dataCourseBeforeSaveTable" />
    </div>
</div>